/*C4*/SET SCHEMA PUBLIC
alter table DateReponses drop constraint FK_mrvwao3vj1ffv303xwmiw7b40
alter table DateReponses drop constraint FK_hwkkddy2t0iwu543xqdy28yf7
alter table DatesPossibles drop constraint FK_e2xl4utky3ga22in57s7thc14
alter table Email drop constraint FK_n7l63i3xn1cwkpws77y1unpc5
alter table Reunion_Utilisateur drop constraint FK_qsuwqeqxo8cr3n1ddolcltcsg
alter table Reunion_Utilisateur drop constraint FK_gcm2x4rlaukip14dy20etgpoy
drop table DateReponses if exists
drop table DatesPossibles if exists
drop table Email if exists
drop table Reunion if exists
drop table Reunion_Utilisateur if exists
drop table Sondage if exists
drop table Utilisateur if exists
create table DateReponses (id bigint generated by default as identity (start with 1), dateReponse date, sondage_id bigint, utilisateur_id bigint, primary key (id))
create table DatesPossibles (id bigint generated by default as identity (start with 1), date date, sondage_id bigint, primary key (id))
create table Email (id bigint generated by default as identity (start with 1), clearCode integer not null, lienPad varchar(255), lienSondage varchar(255), lienWeb varchar(255), administrateur_id bigint, primary key (id))
create table Reunion (id bigint generated by default as identity (start with 1), intitule varchar(100), primary key (id))
create table Reunion_Utilisateur (Reunion_id bigint not null, participants_id bigint not null)
create table Sondage (id bigint generated by default as identity (start with 1), dateValide date, administrateur_id bigint, primary key (id))
create table Utilisateur (DTYPE varchar(31) not null, id bigint generated by default as identity (start with 1), date timestamp, email varchar(255), nom varchar(20), prenom varchar(20), allergies varchar(255), preferenceAlimentaire varchar(255), primary key (id))
alter table DateReponses add constraint FK_mrvwao3vj1ffv303xwmiw7b40 foreign key (sondage_id) references Sondage
alter table DateReponses add constraint FK_hwkkddy2t0iwu543xqdy28yf7 foreign key (utilisateur_id) references Utilisateur
alter table DatesPossibles add constraint FK_e2xl4utky3ga22in57s7thc14 foreign key (sondage_id) references Sondage
alter table Email add constraint FK_n7l63i3xn1cwkpws77y1unpc5 foreign key (administrateur_id) references Utilisateur
alter table Reunion_Utilisateur add constraint FK_qsuwqeqxo8cr3n1ddolcltcsg foreign key (participants_id) references Utilisateur
alter table Reunion_Utilisateur add constraint FK_gcm2x4rlaukip14dy20etgpoy foreign key (Reunion_id) references Reunion
alter table Sondage add constraint FK_s8iwt42bpax5d6qbsm7adovom foreign key (administrateur_id) references Utilisateur
INSERT INTO UTILISATEUR VALUES('Utilisateur',1,NULL,'Jakab@mail.fr','Jakab',' Gipsz',NULL,NULL)
INSERT INTO UTILISATEUR VALUES('Utilisateur',2,NULL,'captainnemo@mail.fr','Captain','Nemo',NULL,NULL)
INSERT INTO UTILISATEUR VALUES('Utilisateur',3,NULL,'hajar@mail.fr','Jahoui',' Hajar',NULL,NULL)
INSERT INTO UTILISATEUR VALUES('Utilisateur',4,NULL,'elise@mail.fr','Chapon','Elise',NULL,NULL)
INSERT INTO UTILISATEUR VALUES('Participants',5,NULL,'hajartgr@mail.fr','zertg',' Hajeerftgar',NULL,NULL)
INSERT INTO UTILISATEUR VALUES('Administrateur',6,NULL,'elisrete@mail.fr','Chapserfdghon','Eliretgse',NULL,NULL)
COMMIT
